webshims.register("form-number-date-api",function(e,t,n,r){"use strict";t.addInputType||t.error("you can not call forms-ext feature after calling forms feature. call both at once instead: $.webshims.polyfill('forms forms-ext')"),t.getStep||(t.getStep=function(t,n){var r=e.attr(t,"step");return"any"===r?r:(n=n||a(t),s[n]&&s[n].step?(r=m.number.asNumber(r),(!isNaN(r)&&r>0?r:s[n].step)*(s[n].stepScaleFactor||1)):r)}),t.addMinMaxNumberToCache||(t.addMinMaxNumberToCache=function(e,t,n){e+"AsNumber"in n||(n[e+"AsNumber"]=s[n.type].asNumber(t.attr(e)),isNaN(n[e+"AsNumber"])&&e+"Default"in s[n.type]&&(n[e+"AsNumber"]=s[n.type][e+"Default"]))});var i=parseInt("NaN",10),s=t.inputTypes,o=function(e){return"number"==typeof e||e&&e==1*e},u=function(t){return e('<input type="'+t+'" />').prop("type")===t},a=function(e){return(e.getAttribute("type")||"").toLowerCase()},f=function(e){return e&&!isNaN(1*e)},l=t.addMinMaxNumberToCache,c=function(e,t){e=""+e,t-=e.length;for(var n=0;t>n;n++)e="0"+e;return e},h=1e-7,p=t.bugs.bustedValidity;t.addValidityRule("stepMismatch",function(e,n,r,i){if(""===n)return!1;if("type"in r||(r.type=a(e[0])),"week"==r.type)return!1;var o,u=(i||{}).stepMismatch||!1;if(s[r.type]&&s[r.type].step){if("step"in r||(r.step=t.getStep(e[0],r.type)),"any"==r.step)return!1;if("valueAsNumber"in r||(r.valueAsNumber=s[r.type].asNumber(n)),isNaN(r.valueAsNumber))return!1;l("min",e,r),o=r.minAsNumber,isNaN(o)&&(o=s[r.type].stepBase||0),u=Math.abs((r.valueAsNumber-o)%r.step),u=!(h>=u||h>=Math.abs(u-r.step))}return u}),[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(e){t.addValidityRule(e.name,function(t,n,r,i){var o=(i||{})[e.name]||!1;if(""===n)return o;if("type"in r||(r.type=a(t[0])),s[r.type]&&s[r.type].asNumber){if("valueAsNumber"in r||(r.valueAsNumber=s[r.type].asNumber(n)),isNaN(r.valueAsNumber))return!1;if(l(e.attr,t,r),isNaN(r[e.attr+"AsNumber"]))return o;o=r[e.attr+"AsNumber"]*e.factor<r.valueAsNumber*e.factor-h}return o})}),t.reflectProperties(["input"],["max","min","step"]);var d=t.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var t=this,n=a(t),r=s[n]&&s[n].asNumber?s[n].asNumber(e.prop(t,"value")):d.prop._supget&&d.prop._supget.apply(t,arguments);return null==r&&(r=i),r},set:function(n){var r=this,i=a(r);if(s[i]&&s[i].numberToString){if(isNaN(n))return e.prop(r,"value",""),undefined;var o=s[i].numberToString(n);o!==!1?e.prop(r,"value",o):t.error("INVALID_STATE_ERR: DOM Exception 11")}else d.prop._supset&&d.prop._supset.apply(r,arguments)}}}),v=t.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var t=this,n=a(t);return s[n]&&s[n].asDate&&!s[n].noAsDate?s[n].asDate(e.prop(t,"value")):v.prop._supget&&v.prop._supget.call(t)||null},set:function(n){var r=this,i=a(r);if(!s[i]||!s[i].dateToString||s[i].noAsDate)return v.prop._supset&&v.prop._supset.apply(r,arguments)||null;if(null===n)return e.prop(r,"value",""),"";var o=s[i].dateToString(n);return o!==!1?(e.prop(r,"value",o),o):(t.error("INVALID_STATE_ERR: DOM Exception 11"),undefined)}}});e.each({stepUp:1,stepDown:-1},function(n,r){var i=t.defineNodeNameProperty("input",n,{prop:{value:function(n){var o,u,f,l,c,p,d=a(this);if(!s[d]||!s[d].asNumber){if(i.prop&&i.prop.value)return i.prop.value.apply(this,arguments);throw t.info("no step method for type: "+d),"invalid state error"}if(p={type:d},n||(n=1,t.info("you should always use a factor for stepUp/stepDown")),n*=r,u=e.prop(this,"valueAsNumber"),isNaN(u))throw t.info("valueAsNumber is NaN can't apply stepUp/stepDown "),"invalid state error";if(o=t.getStep(this,d),"any"==o)throw t.info("step is 'any' can't apply stepUp/stepDown"),"invalid state error";if(t.addMinMaxNumberToCache("min",e(this),p),t.addMinMaxNumberToCache("max",e(this),p),o*=n,u=1*(u+o).toFixed(5),l=(u-(p.minAsNumber||0))%o,l&&Math.abs(l)>h&&(c=u-l,c+=l>0?o:-o,u=1*c.toFixed(5)),!isNaN(p.maxAsNumber)&&u>p.maxAsNumber||!isNaN(p.minAsNumber)&&p.minAsNumber>u)throw t.info("max/min overflow can't apply stepUp/stepDown"),"invalid state error";f?e.prop(this,"valueAsDate",f):e.prop(this,"valueAsNumber",u)}}})});var m={number:{bad:function(e){return!o(e)},step:1,stepScaleFactor:1,asNumber:function(e){return o(e)?1*e:i},numberToString:function(e){return o(e)?e:!1}},range:{minDefault:0,maxDefault:100},color:{bad:function(){var e=/^\u0023[a-f0-9]{6}$/;return function(t){return!t||7!=t.length||!e.test(t)}}()},date:{bad:function(e){if(!e||!e.split||!/\d$/.test(e))return!0;var t,n=e.split(/\u002D/);if(3!==n.length)return!0;var r=!1;if(4>n[0].length||2!=n[1].length||n[1]>12||2!=n[2].length||n[2]>33)r=!0;else for(t=0;3>t;t++)if(!f(n[t])){r=!0;break}return r||e!==this.dateToString(this.asDate(e,!0))},step:1,stepScaleFactor:864e5,asDate:function(e,t){return!t&&this.bad(e)?null:new Date(this.asNumber(e,!0))},asNumber:function(e,t){var n=i;return(t||!this.bad(e))&&(e=e.split(/\u002D/),n=Date.UTC(e[0],e[1]-1,e[2])),n},numberToString:function(e){return o(e)?this.dateToString(new Date(1*e)):!1},dateToString:function(e){return e&&e.getFullYear?c(e.getUTCFullYear(),4)+"-"+c(e.getUTCMonth()+1,2)+"-"+c(e.getUTCDate(),2):!1}},time:{bad:function(t,n){if(!t||!t.split||!/\d$/.test(t))return!0;if(t=t.split(/\u003A/),2>t.length||t.length>3)return!0;var r,i=!1;return t[2]&&(t[2]=t[2].split(/\u002E/),r=parseInt(t[2][1],10),t[2]=t[2][0]),e.each(t,function(e,t){return f(t)&&2===t.length?undefined:(i=!0,!1)}),i?!0:t[0]>23||0>t[0]||t[1]>59||0>t[1]?!0:t[2]&&(t[2]>59||0>t[2])?!0:r&&isNaN(r)?!0:(r&&(100>r?r*=100:10>r&&(r*=10)),n===!0?[t,r]:!1)},step:60,stepBase:0,stepScaleFactor:1e3,asDate:function(e){return e=new Date(this.asNumber(e)),isNaN(e)?null:e},asNumber:function(e){var t=i;return e=this.bad(e,!0),e!==!0&&(t=Date.UTC("1970",0,1,e[0][0],e[0][1],e[0][2]||0),e[1]&&(t+=e[1])),t},dateToString:function(e){if(e&&e.getUTCHours){var t=c(e.getUTCHours(),2)+":"+c(e.getUTCMinutes(),2),n=e.getSeconds();return"0"!=n&&(t+=":"+c(n,2)),n=e.getUTCMilliseconds(),"0"!=n&&(t+="."+c(n,3)),t}return!1}},month:{bad:function(e){return m.date.bad(e+"-01")},step:1,stepScaleFactor:!1,asDate:function(e){return new Date(m.date.asNumber(e+"-01"))},asNumber:function(e){var t=i;return e&&!this.bad(e)&&(e=e.split(/\u002D/),e[0]=1*e[0]-1970,e[1]=1*e[1]-1,t=12*e[0]+e[1]),t},numberToString:function(e){var t,n=!1;return o(e)&&(t=e%12,e=(e-t)/12+1970,t+=1,1>t&&(e-=1,t+=12),n=c(e,4)+"-"+c(t,2)),n},dateToString:function(e){if(e&&e.getUTCHours){var t=m.date.dateToString(e);return t.split&&(t=t.split(/\u002D/))?t[0]+"-"+t[1]:!1}return!1}},"datetime-local":{bad:function(e,t){return e&&e.split&&2===(e+"special").split(/\u0054/).length?(e=e.split(/\u0054/),m.date.bad(e[0])||m.time.bad(e[1],t)):!0},noAsDate:!0,asDate:function(e){return e=new Date(this.asNumber(e)),isNaN(e)?null:e},asNumber:function(e){var t=i,n=this.bad(e,!0);return n!==!0&&(e=e.split(/\u0054/)[0].split(/\u002D/),t=Date.UTC(e[0],e[1]-1,e[2],n[0][0],n[0][1],n[0][2]||0),n[1]&&(t+=n[1])),t},dateToString:function(e,t){return m.date.dateToString(e)+"T"+m.time.dateToString(e,t)}}};!p&&u("range")&&u("time")&&u("month")&&u("datetime-local")||(m.range=e.extend({},m.number,m.range),m.time=e.extend({},m.date,m.time),m.month=e.extend({},m.date,m.month),m["datetime-local"]=e.extend({},m.date,m.time,m["datetime-local"])),["number","month","range","date","time","color","datetime-local"].forEach(function(e){(p||!u(e))&&t.addInputType(e,m[e])}),null==e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){if("hidden"==this.type)return null;var t=this.id,n=e(this).closest("label").filter(function(){var e=this.attributes["for"]||{};return!e.specified||e.value==t});return t&&(n=n.add('label[for="'+t+'"]')),n.get()},writeable:!1}})});