webshims.register("form-validation",function(e,t,n,r,i,s){var o="webkitURL"in n,u=o&&Modernizr.formvalidation&&!t.bugs.bustedValidity,a=u&&parseFloat((navigator.userAgent.match(/Safari\/([\d\.]+)/)||["","999999"])[1],10),f=s.iVal.errorClass||"user-error",l=s.iVal.successClass||"user-success",c=s.iVal.errorWrapperClass||"ws-invalid",h=s.iVal.successWrapperClass||"ws-success",p=s.iVal.errorBoxClass||"ws-errorbox",d={checkbox:1,radio:1},v=e([]),m=function(){return!e.prop(this,"form")},g=function(t){t=e(t);var n,i,s=v;return"radio"==t[0].type&&(i=t.prop("form"),n=t[0].name,s=n?i?e(i).jProp(n):e(r.getElementsByName(n)).filter(m):t,s=s.filter('[type="radio"]')),s},y=function(t,n){var r;return e.each(t,function(t,s){return s?(r=t+e.prop(n,"validationMessage"),!1):i}),r},b=function(e){var t;try{t=r.activeElement.name===e}catch(n){}return t},w={radio:1,checkbox:1,"select-one":1,"select-multiple":1,file:1,date:1,month:1,week:1,text:1},E={time:1,date:1,month:1,datetime:1,week:1,"datetime-local":1},S=function(n){if(s.iVal.sel){var r,o,c,h;if(n.target&&(r=e(n.target).getNativeElement()[0],c=e(r).getShadowElement(),"submit"!=r.type&&e.prop(r,"willValidate")&&("change"!=n.type||!(h=c.prop("type"))||w[h]))){o=e.data(r,"webshimsswitchvalidityclass");var p=function(){if(h||(h=c.prop("type")),!(u&&("change"==n.type||537.36>a)&&E[h]&&e(n.target).is(":focus")||"focusout"==n.type&&"radio"==r.type&&b(r.name))){if(t.refreshCustomValidityRules&&"async"==t.refreshCustomValidityRules(r))return e(r).one("refreshvalidityui",S),i;var s,o,p,v,m,w=e.prop(r,"validity");w.valid?c.hasClass(l)||(s=l,o=f,v="changedvaliditystate",p="changedvalid",d[r.type]&&r.checked&&g(r).not(r).removeClass(o).addClass(s).removeAttr("aria-invalid"),c.removeAttr("aria-invalid"),e.removeData(r,"webshimsinvalidcause")):(m=y(w,r),e.data(r,"webshimsinvalidcause")!=m&&(e.data(r,"webshimsinvalidcause",m),v="changedvaliditystate"),c.hasClass(f)||(s=f,o=l,d[r.type]&&!r.checked&&g(r).not(r).removeClass(o).addClass(s).attr("aria-invalid","true"),c.attr("aria-invalid","true"),p="changedinvalid")),s&&(c.addClass(s).removeClass(o),setTimeout(function(){e(r).trigger(p)},0)),v&&setTimeout(function(){e(r).trigger(v)},0),e.removeData(r,"webshimsswitchvalidityclass")}};o&&clearTimeout(o),"refreshvalidityui"==n.type?p():e.data(r,"webshimsswitchvalidityclass",setTimeout(p,9))}}};e(r.body||"html").on(s.validityUIEvents||"focusout change refreshvalidityui invalid",S).on("reset resetvalui",function(t){var n=e(t.target);"reset"==t.type&&(n=n.filter("form").jProp("elements")),n.filter(".user-error, .user-success").removeAttr("aria-invalid").removeClass("user-error").removeClass("user-success").getNativeElement().each(function(){e.removeData(this,"webshimsinvalidcause")}).trigger("resetvalidityui")});var x=function(){t.scrollRoot=o||"BackCompat"==r.compatMode?e(r.body):e(r.documentElement)},T=Modernizr.boxSizing||Modernizr["display-table"]||e.support.getSetAttribute||e.support.boxSizing?"minWidth":"width",N="transitionDelay"in r.documentElement.style,C={display:"inline-block",left:0,top:0,marginTop:0,marginLeft:0,marginRight:0,marginBottom:0};x(),t.ready("DOM",x),t.getRelOffset=function(t,n,r){var i,s;return t=e(t),e.swap(e(t)[0],C,function(){e.position&&r&&e.position.getScrollInfo?(r.of||(r.of=n),r.using=function(e,n){t.attr({"data-horizontal":n.horizontal,"data-vertical":n.vertical}),i=e},t.attr({"data-horizontal":"","data-vertical":"","data-my":r.my||"center","data-at":r.at||"center"}),t.position(r)):(i=e(n).offset(),s=t.offset(),i.top-=s.top,i.left-=s.left,i.top+=n.outerHeight())}),i},e.extend(t.wsPopover,{isInElement:function(t,n){return t==n||e.contains(t,n)},show:function(t){if(!this.isVisible){var i=e.Event("wspopoverbeforeshow");if(this.element.trigger(i),!i.isDefaultPrevented()){this.isVisible=!0,t=e(t||this.options.prepareFor).getNativeElement();var s=this,o=e(t).getShadowElement(),u=function(e){clearTimeout(s.timers.repos),s.timers.repos=setTimeout(function(){s.position(o)},e&&"pospopover"==e.type?4:200)};this.clear(),this.element.removeClass("ws-po-visible").css("display","none"),this.prepareFor(t,o),this.position(o),s.timers.show=setTimeout(function(){s.element.css("display",""),s.timers.show=setTimeout(function(){s.element.addClass("ws-po-visible").trigger("wspopovershow")},9)},9),e(r).on("focusin"+this.eventns+" mousedown"+this.eventns,function(e){!s.options.hideOnBlur||s.stopBlur||s.isInElement(s.lastElement[0]||r.body,e.target)||s.isInElement(t[0]||r.body,e.target)||s.isInElement(s.element[0],e.target)||s.hide()}),this.element.off("pospopover").on("pospopover",u),e(n).on("resize"+this.eventns+" pospopover"+this.eventns,u)}}},prepareFor:function(t,n){var r,i=this,s={},o=e.extend(!0,{},this.options,e(t.prop("form")||[]).data("wspopover")||{},t.data("wspopover"));this.lastOpts=o,this.lastElement=e(t).getShadowFocusElement(),this.prepared&&this.options.prepareFor||("element"==o.appendTo?this.element.insertAfter(t):this.element.appendTo(o.appendTo)),this.element.attr({"data-class":t.prop("className"),"data-id":t.prop("id")}),s[T]=o.constrainWidth?n.outerWidth():"",this.element.css(s),o.hideOnBlur&&(r=function(e){i.stopBlur?e.stopImmediatePropagation():i.hide()},i.timers.bindBlur=setTimeout(function(){i.lastElement.off(i.eventns).on("focusout"+i.eventns+" blur"+i.eventns,r),i.lastElement.getNativeElement().off(i.eventns)},10)),!this.prepared&&e.fn.bgIframe&&this.element.bgIframe(),this.prepared=!0},clear:function(){e(n).off(this.eventns),e(r).off(this.eventns),this.element.off("transitionend"+this.eventns),this.stopBlur=!1,this.lastOpts=!1,e.each(this.timers,function(e,t){clearTimeout(t)})},hide:function(){var t=e.Event("wspopoverbeforehide");if(this.element.trigger(t),!t.isDefaultPrevented()&&this.isVisible){this.isVisible=!1;var r=this,i=function(t){t&&"transitionend"==t.type&&(t=t.originalEvent)&&t.target==r.element[0]&&"hidden"==r.element.css("visibility")||(r.element.off("transitionend"+r.eventns).css("display","none").attr({"data-id":"","data-class":"",hidden:"hidden"}),clearTimeout(r.timers.forcehide),e(n).off("resize"+r.eventns))};this.clear(),this.element.removeClass("ws-po-visible").trigger("wspopoverhide"),e(n).on("resize"+this.eventns,i),N&&this.element.off("transitionend"+this.eventns).on("transitionend"+this.eventns,i),r.timers.forcehide=setTimeout(i,N?600:40)}},position:function(e){var n=t.getRelOffset(this.element.removeAttr("hidden"),e,(this.lastOpts||this.options).position);this.element.css(n)}}),t.validityAlert=function(){s.messagePopover.position=e.extend({},{at:"left bottom",my:"left top",collision:"none"},s.messagePopover.position||{});var r=t.objectCreate(t.wsPopover,{},s.messagePopover),i=r.hide.bind(r);return r.element.addClass("validity-alert").attr({role:"alert"}),e.extend(r,{hideDelay:5e3,showFor:function(t,n,r,s){t=e(t).getNativeElement(),this.clear(),this.hide(),s||(this.getMessage(t,n),this.show(t),this.hideDelay&&(this.timers.delayedHide=setTimeout(i,this.hideDelay))),r||this.setFocus(t)},setFocus:function(r){var i=e(r).getShadowFocusElement(),s=t.scrollRoot.scrollTop(),o=i.offset().top-30,u=function(){try{i[0].focus()}catch(t){}e(n).triggerHandler("pospopover"+this.eventns)};s>o?t.scrollRoot.animate({scrollTop:o-5},{queue:!1,duration:Math.max(Math.min(600,1.5*(s-o)),80),complete:u}):u()},getMessage:function(e,t){t||(t=e.getErrorMessage()),t?r.contentElement.text(t):this.hide()}}),r}();var k={slide:{show:"slideDown",hide:"slideUp"},fade:{show:"fadeIn",hide:"fadeOut"}};k[s.iVal.fx]||(s.iVal.fx="slide"),t.errorbox={create:function(t,n){n||(n=this.getFieldWrapper(t));var r=e("div."+p,n);return r.length||(r=e('<div class="'+p+'" hidden="hidden">'),n.append(r)),n.data("errorbox",r),r},getFieldWrapper:function(n){var r;return s.iVal.fieldWrapper&&(r="function"==typeof s.iVal.fieldWrapper?s.iVal.fieldWrapper.apply(this,arguments):e(n).parent().closest(s.iVal.fieldWrapper),r.length||(r=!1,t.error("could not find fieldwrapper: "+s.iVal.fieldWrapper))),r||(r=e(n).parent().closest(":not(span, label, em, strong, b, i, mark, p)")),r},_createContentMessage:function(){var t={},n=function(n){var r=e(n).data("errortype");return r||e.each(t,function(t,s){return e(n).is(s)?(r=t,!1):i}),r||"defaultMessage"};return e(function(){e.each(e("<input />").prop("validity"),function(e){if("valid"!=e){var n=e.replace(/[A-Z]/,function(e){return"-"+e.toLowerCase()});t[e]="."+n+", ."+e+", ."+e.toLowerCase()+', [data-errortype="'+e+'"]'}})}),function(t,r){var i=!1,s=e(t).data("errormessage")||{};"string"==typeof s&&(s={defaultMessage:s}),e("> *",r).each(function(){var t=n(this);s[t]||(i=!0,s[t]=e(this).html())}),i&&e(t).data("errormessage",s)}}(),get:function(t,n){n||(n=this.getFieldWrapper(t));var r=n.data("errorbox");return r?"string"==typeof r&&(r=e("#"+r),n.data("errorbox",r),this._createContentMessage(t,r)):(r=this.create(t,n),this._createContentMessage(t,r)),r},addSuccess:function(t,n){var r=e.prop(t,"type"),i=function(){var i=d[r]?e.prop(t,"checked"):e(t).val();n[i?"addClass":"removeClass"](h)},s=w[r]?"change":"blur";e(t).off(".recheckvalid").on(s+".recheckinvalid",i),i()},hideError:function(t,n){var r=this.getFieldWrapper(t),i=r.hasClass(c)?this.get(t,r):r.data("errorbox");return i&&i.jquery&&(r.removeClass(c),i.message="",e(t).filter("input").off(".recheckinvalid"),i[k[s.iVal.fx].hide](function(){e(this).attr({hidden:"hidden"})})),n||this.addSuccess(t,r),r},recheckInvalidInput:function(t){if(s.iVal.recheckDelay&&s.iVal.recheckDelay>90){var n,r=function(){S({type:"input",target:t})};e(t).filter('input:not([type="checkbox"], [type="radio"])').off(".recheckinvalid").on("input.recheckinvalid",function(){clearTimeout(n),n=setTimeout(r,s.iVal.recheckDelay)}).on("focusout.recheckinvalid",function(){clearTimeout(n)})}},showError:function(t){var n=this.getFieldWrapper(t),r=this.get(t,n),i=e(t).getErrorMessage();return r.message!=i&&(r.stop(!0,!0).html("<p>"+i+"</p>"),r.message=i,n.addClass(c).removeClass(h),(r.is("[hidden]")||"none"==r.css("display"))&&(this.recheckInvalidInput(t),r.css({display:"none"}).removeAttr("hidden")[k[s.iVal.fx].show]())),n.removeClass(h),e(t).off(".recheckvalid"),n},reset:function(e){this.hideError(e,!0).removeClass(h)},toggle:function(t){e(t).is(":invalid")?this.showError(t):this.hideError(t)}},e(r.body).on({changedvaliditystate:function(n){if(s.iVal.sel){var r=e(n.target).jProp("form");r.is(s.iVal.sel)&&t.errorbox.toggle(n.target)}},resetvalidityui:function(n){if(s.iVal.sel){var r=e(n.target).jProp("form");r.is(s.iVal.sel)&&t.errorbox.reset(n.target)}},firstinvalid:function(n){if(s.iVal.sel&&s.iVal.handleBubble){var r=e(n.target).jProp("form");r.is(s.iVal.sel)&&(n.preventDefault(),"none"!=s.iVal.handleBubble&&t.validityAlert.showFor(n.target,!1,!1,"hide"==s.iVal.handleBubble))}},submit:function(t){return s.iVal.sel&&!s.iVal.noSubmitCheck&&e(t.target).is(s.iVal.sel)&&e.prop(t.target,"noValidate")&&!e(t.target).checkValidity()?(t.stopImmediatePropagation(),!1):i}}),t.modules["form-core"].getGroupElements=g,s.replaceValidationUI&&t.ready("DOM forms",function(){e(r).on("firstinvalid",function(e){e.isInvalidUIPrevented()||(e.preventDefault(),t.validityAlert.showFor(e.target))})}),function(){var t,n,i=[];e(r).on("invalid",function(s){if(!s.wrongWebkitInvalid){var o=e(s.target);if(!t){t=e.Event("firstinvalid"),t.isInvalidUIPrevented=s.isDefaultPrevented;var u=e.Event("firstinvalidsystem");e(r).triggerHandler(u,{element:s.target,form:s.target.form,isInvalidUIPrevented:s.isDefaultPrevented}),o.trigger(t)}t&&t.isDefaultPrevented()&&s.preventDefault(),i.push(s.target),s.extraData="fix",clearTimeout(n),n=setTimeout(function(){var n={type:"lastinvalid",cancelable:!1,invalidlist:e(i)};t=!1,i=[],e(s.target).trigger(n,[n])},9),o=null}})}(),u&&540>a&&function(){var t=/^(?:textarea|input)$/i,i=!1;r.addEventListener("contextmenu",function(e){t.test(e.target.nodeName||"")&&(i=e.target.form)&&setTimeout(function(){i=!1},1)},!1),e(n).on("invalid",function(e){e.originalEvent&&i&&i==e.target.form&&(e.wrongWebkitInvalid=!0,e.stopImmediatePropagation())})}()});